# =============================================================================
# Infra-Mapper - Configuration
# =============================================================================
# Copy this file to .env and configure the values before starting
# =============================================================================

# =============================================================================
# DATABASE
# =============================================================================
MAPPER_DB_USER=postgres
MAPPER_DB_PASSWORD=your-secure-db-password-here
MAPPER_DB_NAME=infra_mapper

# =============================================================================
# API SECURITY
# =============================================================================
# API Key for agent authentication (generate a strong random key)
MAPPER_API_KEY=your-secure-api-key-here

# Secret key for JWT tokens (generate with: openssl rand -hex 32)
MAPPER_SECRET_KEY=your-jwt-secret-key-here

# =============================================================================
# APPLICATION
# =============================================================================
# Port to expose the application
MAPPER_PORT=8080

# Backend URL (accessible from agents)
# Use your server's IP or domain name
MAPPER_BACKEND_URL=http://your-server-ip:8080

# =============================================================================
# AUTHENTICATION
# =============================================================================
# Enable user authentication (recommended for production)
MAPPER_AUTH_ENABLED=true

# Initial admin account (created on first startup if password is set)
MAPPER_INITIAL_ADMIN_USERNAME=admin
MAPPER_INITIAL_ADMIN_PASSWORD=your-admin-password-here
MAPPER_INITIAL_ADMIN_EMAIL=admin@your-domain.com

# =============================================================================
# SECURITY HEADERS & CORS
# =============================================================================
# CORS origins (JSON array)
# Example: ["https://infra.example.com","https://admin.example.com"]
MAPPER_CORS_ORIGINS=["*"]

# Trusted hosts (JSON array) - set for reverse proxy
# Example: ["infra.example.com","localhost"]
MAPPER_TRUSTED_HOSTS=["*"]

# IP whitelist for X-Forwarded-* headers (for reverse proxy)
MAPPER_FORWARDED_ALLOW_IPS=*

# =============================================================================
# RATE LIMITING
# =============================================================================
MAPPER_RATE_LIMIT_ENABLED=true
MAPPER_RATE_LIMIT_REQUESTS=100
MAPPER_RATE_LIMIT_WINDOW=60

# =============================================================================
# AGENT CONFIGURATION (for deploy-agent.sh)
# =============================================================================
# Scan interval in seconds (90 recommended for tcpdump mode)
MAPPER_SCAN_INTERVAL=90
MAPPER_LOG_LEVEL=INFO
MAPPER_TAILSCALE_ENABLED=true
MAPPER_TCPDUMP_ENABLED=true
MAPPER_TCPDUMP_MODE=intermittent

# =============================================================================
# OPTIONAL: Webhooks
# =============================================================================
# n8n webhook for alerts
# MAPPER_N8N_WEBHOOK_URL=https://n8n.example.com/webhook/xxx
